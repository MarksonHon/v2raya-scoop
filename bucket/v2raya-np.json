{
    "version": "1.5.9.1698.1",
    "description": "v2rayA is a V2Ray client supporting global transparent proxy(Linux Only), compatible with SS, SSR, Trojan(trojan-go), PingTunnel protocols.",
    "homepage": "https://github.com/v2rayA/v2raya",
    "license": {
        "identifier": "AGPL-3.0-only",
        "url": "https://github.com/v2rayA/v2rayA/blob/master/LICENSE"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/v2rayA/v2rayA/releases/download/v1.5.9.1698.1/installer_windows_x64_1.5.9.1698.1.exe#/setup.exe",
            "hash": "cbd7b80ab3071b55a0fce35a7bdef96cbacc23d232bee7e03b7fd3005b982693"
        }
    },
    "pre_install": [
        "#Create placeholder files",
        "function CreateFile([String] $file, [String] $content = $null) {",
        "    if(!(Test-Path \"$persist_dir\\$file\")) {",
        "        info \"Create placeholder for v2raya-np: $file\"",
        "        New-Item -Force -Path \"$persist_dir\\$file\" -ItemType file -Value $content | Out-Null",
        "    }",
        "}",
        "CreateFile 'boltv4.db'",
        "CreateFile 'config.json' '{}'"
    ],
    "installer": {
        "script": [
            "$args = @('/S', \"/D=$dir\")",
            "Start-Process \"$dir\\setup.exe\" -ArgumentList $args -Wait -Verb RunAs"
        ]
    },
    "post_install": [
        "#Remove-Item \"$([Environment]::GetFolderPath('commonstartmenu'))\\Programs\\v2rayA\" -Recurse -Force -ErrorAction 'SilentlyContinue'",
        "Remove-Item \"$dir\\setup.exe\" -Force -ErrorAction 'SilentlyContinue'",
        "$v2raya_startmenu_folder = [System.IO.Path]::Combine([Environment]::GetFolderPath('StartMenu'), 'Programs', 'v2rayA')",
        "if ($global) { $startmenu = 'CommonStartMenu' } else { $startmenu = 'StartMenu' }",
        "$scoop_startmenu_folder = [System.IO.Path]::Combine([Environment]::GetFolderPath($startmenu), 'Programs', 'Scoop Apps')",
        "Move-Item \"$v2raya_startmenu_folder\" \"$scoop_startmenu_folder\\\" -Force -ErrorAction 'SilentlyContinue'"
    ],
    "pre_uninstall": [
        "Start-Process \"$dir\\Uninstall.exe\" -ArgumentList @('/S') -Wait -Verb RunAs",
        "if ($global) { $startmenu = 'CommonStartMenu' } else { $startmenu = 'StartMenu' }",
        "$scoop_startmenu_folder = [System.IO.Path]::Combine([Environment]::GetFolderPath($startmenu), 'Programs', 'Scoop Apps')",
        "Remove-Item \"$scoop_startmenu_folder\\v2rayA\" -Recurse -Force -ErrorAction 'SilentlyContinue'"
    ],
    "persist": [
        "boltv4.db",
        "config.json"
    ],
    "checkver": {
        "url": "https://api.github.com/repos/v2rayA/v2raya/releases/latest",
        "regex": "installer_windows_x64_([\\d.]+).exe"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/v2rayA/v2rayA/releases/download/v$version/installer_windows_x64_$version.exe#/setup.exe"
            }
        }
    }
}
